<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Mapa da Secretaria</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
#map{ height:100vh; }
</style>
</head>

<body>
<div id="map"></div>

<script>
const map = L.map('map').setView([-3.7319, -38.5267], 12);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'Â© OpenStreetMap'
}).addTo(map);

const dados = JSON.parse(localStorage.getItem("avaliacoes")) || [];

dados.forEach(r=>{
  let cor = r.status === "adequado" ? "green" :
            r.status === "alerta" ? "orange" : "red";

  L.circleMarker(
    [-3.7319 + Math.random()*0.02, -38.5267 + Math.random()*0.02],
    { radius:8, color:cor, fillColor:cor, fillOpacity:0.8 }
  )
  .addTo(map)
  .bindPopup(<strong>${r.escola}</strong><br>Status: ${r.status}<br>${r.data});
});
</script>

</body>
</html>

